{% extends "two_factor/_base.html" %}
{% load i18n %}
{% load static %}
{% load two_factor_tags %}

{% block content %}

<h1 class="mt-4 custom-h1">{% block title %}{% trans "Account Security" %}{% endblock %}</h1>

<div class="container">
  <div class="row g-1 "style="background-color: #f2f2f2; ">
    <div class="col-md-8 card h-100">

<div class="card-body" style="background-color: #f2f2f2; ">
      {% if default_device %}
        <p class="lead">{% blocktrans with primary=default_device|as_action %}Primary method: {{ primary }}{% endblocktrans %}</p>

        {% if available_phone_methods %}
          <h2 class="mt-4">{% trans "Backup Phone Numbers" %}</h2>
          <p>{% blocktrans trimmed %}If your primary method is not available, we can send backup tokens to the phone numbers listed below.{% endblocktrans %}</p>
          <ul class="list-group">
            {% for phone in backup_phones %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  {{ phone|as_action }}
                </div>
                <form method="post" action="{% url 'two_factor:phone_delete' phone.id %}" onsubmit="return confirm({% trans 'Are you sure?' %})">
                  {% csrf_token %}
                  <button class="btn btn-sm btn-warning" type="submit">{% trans "Unregister" %}</button>
                </form>
              </li>
            {% endfor %}
          </ul>
          <p class="mt-3"><a href="{% url 'two_factor:phone_create' %}" class="btn btn-info">{% trans "Add Phone Number" %}</a></p>
        {% endif %}

        <h2 class="mt-4">{% trans "Backup Tokens" %}</h2>
        <p>{% blocktrans trimmed %}If you don't have any device with you, you can access your account using backup tokens.{% endblocktrans %}</p>
        <p>{% blocktrans trimmed count counter=backup_tokens %}
          You have only one backup token remaining.
          {% plural %}
          You have {{ counter }} backup tokens remaining.
          {% endblocktrans %}
        </p>
        <p><a href="{% url 'two_factor:backup_tokens' %}" class="btn btn-info">{% trans "Show Codes" %}</a></p>

        <h3 class="mt-4">{% trans "Disable Two-Factor Authentication" %}</h3>
        <p>{% blocktrans trimmed %}However, we strongly discourage you from doing so. You can also disable two-factor authentication for your account.{% endblocktrans %}</p>
        <p><a class="btn btn-secondary" href="{% url 'two_factor:disable' %}">{% trans "Disable Two-Factor Authentication" %}</a></p>

      {% else %}
        <p class="lead">{% blocktrans trimmed %}Two-factor authentication is not enabled for your account. Enable two-factor authentication for enhanced account security.{% endblocktrans %}</p>
        <p><a href="{% url 'two_factor:setup' %}" class="btn btn-primary">{% trans "Enable Two-Factor Authentication" %}</a></p>
      {% endif %}

    </div>
  </div>


      <div class="col-md-4">
        <!-- Image Card -->
        <div class="card h-100">
          <img src="{%static 'images/heart3.jpg' %}" class="card-img-top" alt="Image Alt Text">
          <div class="card-body bg-dark text-white text-center">
            <h5 class="card-title">CVDetect</h5>
            <p class="card-text">Healthy Heart, Healthy Life! </p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
